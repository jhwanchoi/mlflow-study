service: "service:svc"
description: "MLflow Vision Model Serving API - CIFAR-10 Image Classification"
labels:
  owner: mlops-team
  project: mlflow-study
  framework: pytorch
  mlflow: "true"

include:
  - "*.py"
  - "../config/*.py"
  - "../models/*.py"

python:
  packages:
    - torch>=2.1.0
    - torchvision>=0.16.0
    - mlflow>=2.10.0
    - pillow>=10.1.0
    - numpy>=1.24.0
    - pydantic>=2.5.0
    - pydantic-settings>=2.1.0
    - python-dotenv>=1.0.0
    - boto3>=1.34.0
    - psycopg2-binary>=2.9.9
  lock_packages: true

docker:
  distro: debian
  python_version: "3.11"
  env:
    MLFLOW_TRACKING_URI: "http://mlflow:5000"
    MODEL_RUN_ID: ""  # Set via environment variable or override
    MODEL_NAME: ""    # Set via environment variable or override
    MODEL_VERSION: "latest"
